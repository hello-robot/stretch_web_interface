<!DOCTYPE HTML>
<html>
  <head>
    <!-- META tags go here -->
    <!-- This can improve the appearance of web pages on mobile devices. -->
    
	<meta http-equiv="content-type" content="text/html; charset=utf-8 ;">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--<meta name="viewport" content="height=device-height, initial-scale=1.0">-->
 		
	<!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  	
<!--   	<link rel="stylesheet" href="styles/style.processed.css"> -->
  </head>
  <body onmouseup="stopAction()">

  	<div class="container-fluid px-sm-3 py-sm-3 d-flex justify-content-left">

	      <div id="modeSwitch">
					<div class="btn-group" role="group" aria-label="Basic example">
					  <button id="modeButtonNav" type="button" onclick="setMode('nav')" class="btn btn-sm btn-secondary btn-info">Navigation</button>
					  <button id="modeButtonManip" type="button" onclick="setMode('manip')" class="btn btn-sm btn-secondary">Manipulation</button>
					</div>
	      </div>

		  <div class="d-flex flex-fill justify-content-end mb-4">
			  <div class="switch-2">
				        <input type="radio" class="switch-input" name="v-switch" value="verysmall" id="verysmall">
				        <label for="verysmall" class="switch-label-sm switch-label-0 switch-speed-1" onclick="setVelocity('verysmall')">Slowest</label>
				        
				        <input type="radio" class="switch-input" name="v-switch" value="small" id="small">
				        <label for="small" class="switch-label-sm switch-label-1 switch-speed-2" onclick="setVelocity('small')">Slow</label>
				        
				        <input type="radio" class="switch-input" name="v-switch" value="medium" id="medium" checked>
				        <label for="medium" class="switch-label-sm switch-label-2 switch-speed-3" onclick="setVelocity('medium')">Medium</label>
				        
				        <input type="radio" class="switch-input" name="v-switch" value="large" id="large">
				        <label for="large" class="switch-label-sm switch-label-3 switch-speed-4" onclick="setVelocity('large')">Fast</label>
				        
				        <input type="radio" class="switch-input" name="v-switch" value="verylarge" id="verylarge">
				        <label for="verylarge" class="switch-label-sm switch-label-4 switch-speed-5" onclick="setVelocity('verylarge')">Fastest</label>
				        <span class="switch-selection switch-selection-sm"></span>
			    </div>
    	</div>

    </div>


  	<div class="container-fluid px-sm-3 py-sm-3 d-flex justify-content-left bg-danger">
 		<!-- TODO: Eventually this should be generated with code -->	
 		<div class="container-fluid d-flex flex-row justify-content-around">
		    
		    <div class="wide_div" id="overheadVideoHolder">
		    </div>


		    <div class="nav_mode_div" id="pantiltVideoHolder">
		    </div>


		    <div class="wide_div" id="gripperVideoHolder">
		    </div>
		    	
		    	<!-- <div class=""></div>
		    	<div class="">
		    		<button id="lookUpManipButton" type="button" class="btn btn-secondary btn-sm h-button" title="Look up" onclick="lookUp()" onmousedown="startAction('lookUp')")>^</button>
		    	</div>
		    	<div class=""></div>
		    	<div class=""></div>

		    	<div class="d-flex justify-content-end">
		    		<button id="lookRightManipButton" type="button" class="btn btn-secondary btn-sm v-button" title="Look left" onclick="lookLeft()" onmousedown="startAction('lookLeft')"><</button>
		    	</div>
			    
		    	<div>
		    	</div>

		    	<div class="d-flex justify-content-start">
		    		<button id="lookLeftManipButton" type="button" class="btn btn-secondary btn-sm v-button" title="Look right" onclick="lookRight()" onmousedown="startAction('lookRight')">></button>
		    	</div>
		    	<div class="d-flex flex-column justify-content-sm-center">
	 					<button id="stowArmButton" type="button" class="btn btn-secondary btn-block my-2" title="Stow arm" onclick="stowArm()">
						  Stow arm
						</button>
						<button id="prepArmButton" type="button" class="btn btn-secondary btn-block my-2" title="Prepare arm" onclick="prepArm()">
						  Prepare arm
						</button>
		    	</div>
 		    	<div class="d-flex flex-column justify-content-sm-center">
					<button id="gripperCloseButton" type="button" class="btn btn-outline-danger btn-block my-2" title="Close gripper" onclick="gripperClose()" onmousedown="startAction('gripperClose')">
			  		<img src="gripper_close_medium.png" width="30"/>
					</button>
					<button id="gripperOpenButton" type="button" class="btn btn-outline-danger btn-block my-2" title="Open gripper" onclick="gripperOpen()" onmousedown="startAction('gripperOpen')">
					  <img src="gripper_open_medium.png" width="30"/>
					</button>
 		
 					</div>
-->
 					<div class="d-flex flex-column justify-content-sm-center" id="robotPoseContainer"></div>

		    	<div class=""></div>
		    	<div class="">
		    		<button id="lookDownManipButton" type="button" class="btn btn-secondary btn-sm h-button" title="Look down" onclick="lookDown()" onmousedown="startAction('lookDown')">v</button>
		    	</div>
		    	<div class=""></div>
		    	<div class=""></div>

		    	<div class=""></div>
		    	<div class="">
		    		<button id="resetViewManipButton" type="button" class="btn btn-info btn-sm h-button" title="Reset camera view" onclick="setCameraView('manip')">
		    			Reset camera view
		    		</button>
		    	</div>
		    	<div class=""></div>
		    	<div class=""></div>

		    	<div class=""></div>
		    	<div class="d-flex justify-content-center">
					<div class="form-check">
					  <input class="form-check-input" type="checkbox" value="" onchange="toggleCameraFollowGripper()" id="cameraFollowGripperOn">
					  <label class="form-check-label" for="cameraFollowGripperOn">
					    Follow gripper
					  </label>
					</div>
		    	</div>
		    	<div class=""></div>
		    	<div class=""></div> -->

		</div>
	</div>

    <hr>

	<div class="d-flex flex-row">
      <div class="">
	      <div class="select-robot">
	  		<label for="robotToControl">Robot: </label><select id="robotToControl"></select>
	  		<input id="hangup" type="button" class="btn btn-sm btn-warning" value="hang up" onclick="hangup();" />
	      </div>
	  </div>

	  <div class="d-flex flex-fill justify-content-end mb-4">
		  <div class="mr-4">
			  <img id="googleSignInButton" src="../shared/assets/web/2x/btn_google_signin_light_normal_web@2x.png" onclick="db.signInWithGoogle()" />
			  <label id="googleSignInInfo" for="googleSignInButton"></label>
		  </div>
	    <!-- Button to open the settings -->
	      <div class="recordswitch">
	  		<button id="record" type="button" class="btn btn-sm btn-secondary">Start Recording</button>
	  		<button id="download" type="button" class="btn btn-sm btn-secondary" disabled>Download Recording</button>
	      </div>
		  <button type="button" class="btn btn-primary btn-sm ml-4" data-toggle="modal" data-target="#settings">
		  	Settings
		  </button>
	  </div>
    </div>


	<!-- SETTINGS -->
	<div class="modal fade bd-example-modal-lg" id="settings" tabindex="-1" role="dialog" aria-labelledby="settingsTitle" aria-hidden="true">
	  <div class="modal-dialog modal-lg" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="settingsTitle">Settings</h5>
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          <span aria-hidden="true">&times;</span>
	        </button>
	      </div>
	      <div class="modal-body">

			<div class="form-check mb-4">
			  <input class="form-check-input" type="checkbox" value="" id="showPermanentIconsOverhead" onchange="checkboxSettingChange(this);" checked>
			  <label class="form-check-label" for="showPermanentIconsOverhead">
			    Overhead view -- permanent icons?
			  </label>
			</div>
			<div class="form-check mb-4">
			  <input class="form-check-input" type="checkbox" value="" id="showPermanentIconsPantilt" onchange="checkboxSettingChange(this);" checked>
			  <label class="form-check-label" for="showPermanentIconsPantilt">
			    Pan-Tilt view -- permanent icons?
			  </label>
			</div>
			<div class="form-check mb-4">
			  <input class="form-check-input" type="checkbox" value="" id="showPermanentIconsGripper" onchange="checkboxSettingChange(this);" checked>
			  <label class="form-check-label" for="showPermanentIconsGripper">
			    Gripper view -- permanent icons?
			  </label>
			</div>

      		<div class="d-flex flex-row">
			      <div class="onoffswitch">
					<input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked>
					<label class="onoffswitch-label" for="myonoffswitch">
					  <span class="onoffswitch-inner"></span>
					  <span class="onoffswitch-switch"></span>
					</label>
			      </div>
			    <div class="ml-4 my-3">
			  		<label for="audioSource">Audio in: </label><select id="audioSource"></select>
			    </div>
			    <div class="ml-2 my-3">
			  		<label for="audioOutput">Audio out: </label><select id="audioOutput"></select>
			    </div>
	      	</div>

  			<div class="d-flex flex-row">
			    <div class="ml-2 my-3">
			  		<label>Movement speed</label>
			    </div>
			    <div class="ml-2 my-3">
				  <div class="switch-2">
				        <input type="radio" class="switch-input" name="v-switch" value="verysmall" id="verysmall">
				        <label for="verysmall" class="switch-label-sm switch-label-0 switch-speed-1" onclick="setVelocity('verysmall')">Slowest</label>
				        
				        <input type="radio" class="switch-input" name="v-switch" value="small" id="small">
				        <label for="small" class="switch-label-sm switch-label-1 switch-speed-2" onclick="setVelocity('small')">Slow</label>
				        
				        <input type="radio" class="switch-input" name="v-switch" value="medium" id="medium" checked>
				        <label for="medium" class="switch-label-sm switch-label-2 switch-speed-3" onclick="setVelocity('medium')">Medium</label>
				        
				        <input type="radio" class="switch-input" name="v-switch" value="large" id="large">
				        <label for="large" class="switch-label-sm switch-label-3 switch-speed-4" onclick="setVelocity('large')">Fast</label>
				        
				        <input type="radio" class="switch-input" name="v-switch" value="verylarge" id="verylarge">
				        <label for="verylarge" class="switch-label-sm switch-label-4 switch-speed-5" onclick="setVelocity('verylarge')">Fastest</label>
				        <span class="switch-selection switch-selection-sm"></span>
				    </div>
			    </div>
	      	</div>

			<div class="d-flex flex-row">
				<div class="checkbox ml-2 my-3">
					<label class="checkbox-inline no_indent">
						Arm Reach Visualization:
						<input id="reachVisualization" type="checkbox" onchange="updateReachVisualizationDisplay()">
					</label>
				</div>
	      	</div>

	      </div>

	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
	      </div>
	    </div>
	  </div>
	</div>

	<!-- POSES -->
	<div class="modal fade" id="posesModal" tabindex="-1" role="dialog" aria-labelledby="posesTitle" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="posesModalTitle">Add pose</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form role="form" id="addPoseForm" class="needs-validation" novalidate>
						<div class="form-group">
							<label for="poseModalDescription">Pose description</label>
							<input type="text" class="form-control" id="poseModalDescription" placeholder="Enter description" required>
							<div class="invalid-feedback">
								Please enter a name for this pose
							</div>
						</div>
						<label for="description">Sections to save</label>
						<fieldset id="checkArray">
							<div class="form-check">
								<input type="checkbox" class="poseSaveSelection form-check-input" id="poseSaveSelection_head" required /> Head <br>
							</div>
							<div class="form-check">
								<input type="checkbox" class="poseSaveSelection form-check-input" id="poseSaveSelection_gripper" required /> Gripper <br>
							</div>
							<div class="form-check">
								<input type="checkbox" class="poseSaveSelection form-check-input" id="poseSaveSelection_arm" required /> Arm <br>
								<div class="invalid-feedback">
									Please select at least one section to save
								</div>
							</div>
						</fieldset>
					<button type="submit" class="btn btn-primary mt-4">Add Pose</button>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				</div>
			</div>
		</div>
	</div>

     
</div>

<link rel="stylesheet" type="text/css" href="operator.css" media="screen" />

<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<!-- THREE.js core and extensions -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" integrity="sha512-dLxUelApnYxpLt6K2iomGngnHO83iUvZytA3YjDUCjT0HDOHKXnVYdf3hU4JjM8uEhxf9nD1/ey98U3t2vZ0qQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/postprocessing@6.22.1/build/postprocessing.min.js" integrity="sha256-pyGwxSnoRHKgrnFqpxGf22nsl+CEKp1/vaD9NH+6a1Q=" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
<script src="https://cdn.jsdelivr.net/npm/postprocessing@6.22.1/build/postprocessing.js"></script>
<script src="../shared/video_dimensions.js"></script>
<script src="operator.js"></script>
<script src="operator_ui_regions.js"></script>
<script src="../shared/sensors.js"></script>
<script src="../shared/commands.js"></script>
<script src="../shared/database.js"></script>
<script src="../shared/request_response.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
<script src="operator_acquire_av.js"></script>
<script src="operator_recorder.js"></script>
<script src="operator_pose.js"></script>
<script src="../shared/send_recv_av.js"></script>
<script type='text/javascript' >
	initializeOperatorInterface();
</script>
</body>
</html>
